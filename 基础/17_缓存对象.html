<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="a17">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>$cacheFactory服务创建缓存对象</title>
<script src="angular-1.6.9/angular.min.js" type="text/javascript"></script>
</head>

<body>
	<div ng-controller="c1">
    	<input type="text" ng-model="cname" size=6 />
    	<button ng-click="cset()">设置</button>
    	<button ng-click="cshow()">显示</button>
    	<button ng-click="cdel()">删除</button>
    	<div>缓存值是：{{cvalue}}</div>
    </div>
    <script type="text/javascript">
		var a17=angular.module('a17',[]);
		a17.service("cache",function($cacheFactory){		//创建一个返回缓存对象的服务
			return $cacheFactory();
			})
			.controller("c1",function($scope,cache){
				$scope.cset=function(){cache.put("mytest",$scope.cname);}	//添加key为mytest的缓存
				$scope.cshow=function(){
					var tcache=cache.get("mytest");			//指定key为mytest的缓存的value为输入值
					$scope.cvalue=tcache?tcache:"空值";
				}
				$scope.cdel=function(){cache.remove("mytest");}				//删除key为mytest的缓存
			});
	</script>
</body>
</html>
